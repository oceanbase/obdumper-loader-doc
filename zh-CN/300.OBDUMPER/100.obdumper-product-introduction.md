产品简介 
=========================



什么是 OBDUMPER 
---------------------------------

OBDUMPER 是一款使用 Java 开发的客户端导出工具。可以使用该工具将 OceanBase 数据库中定义的对象和数据导出到文件中。

与 MyDumper 和 SQLDeveloper 等导出工具相比，OBDUMPER 具备以下显著优势：

* 高性能：针对不同的表定义设计多种查询策略，保证最佳的导出性能。
* 多功能：提供数据预处理、多种类型的数据格式和全局一致性非锁定导出数据等功能。



产品功能 
-------------------------

OBDUMPER 主要具备以下功能特性：

* 支持导出数据库对象定义的语句。

  

* 支持将表中的数据按照 CSV 或者 SQL 格式导出到文件中。

  

* 支持指定分区名，导出指定分区内的表数据。

  

* 支持指定全局的过滤条件，仅导出满足条件的数据。

  

* 支持配置数据预处理规则，导出前对数据进行转换处理。

  

* 支持将导出数据上传到 OSS 云存储服务。

  

* 支持从 OceanBase 的备副本中导出数据。（区别于备集群）

  

* 支持按照 SQL, CSV, CUT 三种数据格式导出自定义查询的结果集。

  

* 支持非锁表的情况下，通过读取快照版本来保证导出数据的全局一致性。

  




支持的 OceanBase 数据库 
--------------------------------------

已支持的 OceanBase 数据库模式与版本，如下表所示：


| OceanBase 模式 |                                       **支持的版本** 号                                        |
|--------------|------------------------------------------------------------------------------------------|
| MySQL 模式     | 1.4.70、1.4.72、1.4.75、1.4.78、1.4.79、2.2.30、2.2.50、2.2.70、2.2.71、2.2.72、2.2.76、3.1.x、3.2.x |


>**注意**<br>
> OBDUMPER 3.0.0 版本已支持 OceanBase 社区版 3.1.2 及之后版本。

注意事项 
-------------------------

* 标准的 CSV 格式请参考 [RFC 4180](http://mirrors.nju.edu.cn/rfc/inline-errata/rfc4180.html) 规范，建议导出严格遵从 [RFC 4180](http://mirrors.nju.edu.cn/rfc/inline-errata/rfc4180.html) 规范。

  

* 导出大量数据时，请在运行的脚本中修改虚拟机的内存参数。

  

* 命令行参数指定的对象名、数据文件名、规则文件名要求大小写一致。MySQL 默认小写。

  

* 导出数据前建议用户触发一次合并，可以提升导出的性能。

  

* 导出的数据文件的命名规范是 table.group.sequence.suffix。

  

* 外键中包含多列，导出时无法保证列的顺序。例如： FOREIGN KEY(c1,c2) REFERENCE (c1,c2)。

  

* OceanBase MySQL 1.4.72 不支持导出唯一前缀索引的定义。例如： UNIQUE(c1(10)) 。

  

* OceanBase MySQL 1.4.x 不支持导出生成列的定义。例如：GENERATED ALWAYS AS (expr)。

  

* OceanBase MySQL 2.2.7x 不支持导出垂直分区。例如：partition by column。

  

* OceanBase MySQL 2.2.7x 不支持导出 SYNONYM 对象定义。

  

* OceanBase MySQL 2.2.7x 不支持导出索引的存储列。例如：storing(column_list)。

* Windows 系统不能使用 ！作为分隔符。数据库的对象名不能包含 \\ / : \* ? " \< \> \| 等特殊符号，否则对象定义和表数据都无法正常导出。

  




限制模式 
-------------------------

> **说明**<br>
> 限制模式仅适用于用户无法直接提供 `--sys-user` 和 `--sys-password` 选项的场景。

* 使用限制模式（`--public-cloud`）从公共云部署的 OceanBase 集群导出数据时无需指定 `-t`, `-c` 连接选项，从私有云部署的 OceanBase 集群导出数据时需要指定 `-t` 连接选项，连接 ODP 服务时还需要加上 `-c` 选项。如果用户未使用限制模式，OBDUMPER 必须指定 `--sys-user` 和 `--sys-password` 选项。

  

* 使用限制模式（`--public-cloud`）导出对象定义时，仅可以导出 TABLE 和 VIEW 两种对象类型的定义。其中 TABLE 类型的定义中不包含索引、注释等信息。并且导出数据的性能低于非限制模式下导出数据的性能。